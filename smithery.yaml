# Smithery konfigurace pro mcp-server-motherduck
# Dokumentace: https://smithery.ai/docs/config

# Jak spustit server (streamable HTTP pro remote deployment)
startCommand:
  type: http
  port: 8000
  
  # Konfigurace parametrů
  configSchema:
    type: object
    properties:
      db_path:
        type: string
        description: "Path to local DuckDB database file or MotherDuck database"
        default: "md:"
      motherduck_token:
        type: string
        description: "Access token for MotherDuck database connections"
        secret: true
      home_dir:
        type: string
        description: "Home directory for DuckDB"
      read_only:
        type: boolean
        description: "Connect to database in read-only mode"
        default: false
      saas_mode:
        type: boolean
        description: "Connect to MotherDuck in SaaS mode (enhanced security)"
        default: false
  
  # Jak sestavit příkaz pro spuštění (HTTP stream transport)
  commandFunction: |
    (config) => {
      const args = [
        '--transport', 'stream',
        '--port', '8000'
      ];
      
      // Přidat db-path parametr
      if (config.db_path) {
        args.push('--db-path', config.db_path);
      }
      
      // Přidat motherduck-token pokud je nastaven
      if (config.motherduck_token) {
        args.push('--motherduck-token', config.motherduck_token);
      }
      
      // Přidat home-dir pokud je nastaven
      if (config.home_dir) {
        args.push('--home-dir', config.home_dir);
      }
      
      // Přidat read-only flag
      if (config.read_only === true) {
        args.push('--read-only');
      }
      
      // Přidat saas-mode flag
      if (config.saas_mode === true) {
        args.push('--saas-mode');
      }
      
      return {
        command: 'mcp-server-motherduck',
        args: args
      };
    }

# Příklady konfigurace
examples:
  - name: "MotherDuck Connection"
    description: "Connect to MotherDuck cloud database"
    config:
      db_path: "md:"
      motherduck_token: "${MOTHERDUCK_TOKEN}"
  
  - name: "Local DuckDB File"
    description: "Connect to local DuckDB database file"
    config:
      db_path: "/path/to/local.db"
  
  - name: "In-Memory Database"
    description: "Use in-memory DuckDB database"
    config:
      db_path: ":memory:"
  
  - name: "MotherDuck SaaS Mode (Secure)"
    description: "Connect to MotherDuck with enhanced security"
    config:
      db_path: "md:"
      motherduck_token: "${MOTHERDUCK_TOKEN}"
      saas_mode: true
      read_only: true